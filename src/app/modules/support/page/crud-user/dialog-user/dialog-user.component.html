<mat-card-title class="">
  <div class="card-title-text">{{data.title}}</div>
  <mat-divider></mat-divider>
</mat-card-title>
<mat-dialog-content>
<mat-card-content class="height-auto">
  <form [formGroup]="itemForm" (ngSubmit)="submit(fileInput.files)">
    <div fxLayout="row wrap" fxLayout.lt-sm="column">
      <div fxFlex="50"  class="pr-16">
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Primer Nombre</mat-label>
          <input
          matInput
          maxlength="100"
          (keypress)="lettersOnly($event)" 
          name="PrimerNombre"
          [formControl]="itemForm.controls['firstName']"
          placeholder="Primer Nombre">
        </mat-form-field>
        <small 
        *ngIf="itemForm.controls['firstName'].hasError('required') && itemForm.controls['firstName'].touched" 
        class="form-error-msg"> El Primer Nombre es obligatorio </small>
      </div>
      <div fxFlex="50"  class="pr-16">
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Segundo Nombre</mat-label>
          <input
          matInput
          maxlength="100"
          (keypress)="lettersOnly($event)" 
          name="Segundo Nombre"
          [formControl]="itemForm.controls['secondName']"
          placeholder="Segundo Nombre">
        </mat-form-field>
        <!-- <small *ngIf="itemForm.controls['secondName'].hasError('required') && itemForm.controls['secondName'].touched" 
        class="form-error-msg"> El Segundo Nombre es obligatorio </small> -->
      </div>
      <div fxFlex="50"  class="pr-16">
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Apellido Paterno</mat-label>
          <input
          matInput
          maxlength="100"
          (keypress)="lettersOnly($event)" 
          name="Apellidop Paterno"
          [formControl]="itemForm.controls['lastName']"
          placeholder="Apellido Paterno">
        </mat-form-field>
        <small 
        *ngIf="itemForm.controls['lastName'].hasError('required') && itemForm.controls['lastName'].touched" 
        class="form-error-msg"> El Apellido Paterno es obligatorio </small>
      </div>
      <div fxFlex="50"  class="pr-16">
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Apellido Materno</mat-label>
          <input
          matInput
          maxlength="100"
          (keypress)="lettersOnly($event)" 
          name="Apellido Materno"
          [formControl]="itemForm.controls['motherLastName']"
          placeholder="Apellido Materno">
        </mat-form-field>
        <small 
        *ngIf="itemForm.controls['motherLastName'].hasError('required') && itemForm.controls['motherLastName'].touched" 
        class="form-error-msg"> El Apelido Materno es obligatorio </small>
      </div>
      <div fxFlex="50"  class="pr-16">
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Celular</mat-label>
          <input
          matInput
          maxlength="100"
          (keypress)="NumbersOnly($event)" 
          name="Celular"
          [formControl]="itemForm.controls['phone']"
          placeholder="Celular">
        </mat-form-field>
        <small *ngIf="itemForm.controls['phone'].hasError('required') && itemForm.controls['phone'].touched" class="form-error-msg"> El Celular es obligatorio </small>
          <small *ngIf="itemForm.controls['phone'].hasError('minlength') && itemForm.controls['phone'].touched" class="form-error-msg"> Es necesario solo ingresar 9 digitos </small>
          <small *ngIf="itemForm.controls['phone'].hasError('maxlength') && itemForm.controls['phone'].touched" class="form-error-msg"> Es necesario solo ingresar 9 digitos </small>
       
      </div>
      <div fxFlex="50"  class="pr-16">
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Email</mat-label>
          <input
          matInput
          maxlength="100"
          name="Correo"
          [formControl]="itemForm.controls['email']"
          placeholder="Email">
        </mat-form-field>
        <small *ngIf="itemForm.controls['email'].hasError('required') && itemForm.controls['email'].touched" class="form-error-msg"> El Correo es obligatorio </small>
        <small *ngIf="itemForm.controls['email'].hasError('email') && itemForm.controls['email'].touched" class="form-error-msg"> Correo debe de tener un formato válido </small>
        <small *ngIf="itemForm.controls['email'].hasError('pattern') && itemForm.controls['email'].touched" class="form-error-msg"> Solo está permitido números, letras y algunos caracteres </small>
      </div>
      <div fxFlex="50"  class="pr-16">
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Perfil</mat-label>
          <mat-select [formControl]="itemForm.controls['idProfile']" >
            <mat-option *ngFor="let item of profile" [value]="item.id">{{item.name}}</mat-option>
          </mat-select>
        </mat-form-field>
        <small *ngIf="itemForm.controls['idProfile'].hasError('required') && itemForm.controls['idProfile'].touched" class="form-error-msg"> El Perfil es obligatorio </small>
      </div>
      <div fxFlex="50"  class="pr-16">
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Nombre de Usuario</mat-label>
          <input
          matInput
          maxlength="100"
          name="Nombre del Usuariuo"
          [formControl]="itemForm.controls['userName']"
          placeholder="Nombre de Usuario">
        </mat-form-field> 
        <small *ngIf="itemForm.controls['userName'].hasError('required')" 
        class="form-error-msg"> El Nombre del Usuario es obligatorio  </small>
      <small *ngIf="itemForm.controls['userName'].hasError('pattern')" class="form-error-msg">Solo se debe de ingresar <strong>letras y números</strong> 
      </small>
        
      </div>  
      <div fxFlex="50"  class="pr-16" *ngIf='idUser == 0'>
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Contraseña</mat-label>
          <input type="password"
          matInput
          maxlength="100"
          name="Contraseña"
          [formControl]="itemForm.controls['passwordwithoutencryption']"
          placeholder="Contraseña"
          (ngModelChange)="validContrasenias()">
        </mat-form-field>
        <small *ngIf="!contrasenias_iguales && itemForm.controls['passwordwithoutencryption'].touched" 
        class="form-error-msg"> Las contraseñas no coinciden </small>
        <small  *ngIf="itemForm.controls['passwordwithoutencryption'].hasError('required') && itemForm.controls['passwordwithoutencryption'].touched" 
        class="form-error-msg"> La Contraseña es obligatorio </small>
      </div>  

      <div fxFlex="50"  class="pr-16" *ngIf='idUser == 0'>
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Repetir Contraseña</mat-label>
          <input type="password"
          matInput
          maxlength="100"
          name="Repetir Contraseña"
          [formControl]="itemForm.controls['passwordconfirm']"
          placeholder="Repetir Contraseña"
          (ngModelChange)="validContrasenias()">
        </mat-form-field>
        <small *ngIf="!contrasenias_iguales && itemForm.controls['passwordconfirm'].touched" 
        class="form-error-msg"> Las contraseñas no coinciden </small>
        <small *ngIf="itemForm.controls['passwordconfirm'].hasError('required') && itemForm.controls['passwordconfirm'].touched" 
        class="form-error-msg"> El Repetir Contraseña es obligatorio </small>

      </div>

      <div class="pr-16 col-xl-6 col-lg-6 col-md-12 col-sm-12">
        <div>
            <div class="row mt-2 mb-2">
            <div class="row">
              <div class="col-md-6 col-sm-12 div-btn-file">
                <button mat-raised-button class="btn-grupofe mt-16 margin-right-10" (click)="fileInput.click()"
                  type="button">
                  <mat-icon>file_upload</mat-icon>
                  Cargar foto
                </button>
              </div>
              <div class="col-md-6 col-sm-12 div-btn-file">
                <button mat-raised-button class="btn-grupofe mt-16 mr-4" (click)="deletefile();" type="button">
                  <mat-icon>delete</mat-icon>
                  Borrar foto
                </button>
              </div>
            </div>
          </div>
          <div class="row mt-16 mb-2">
            <div class="col-md-6 col-sm-6 col-lg-12">
              <span class="titulo-archivo">Foto: </span>
              <p class="titulo-archivo" [innerHTML]="displayFileName"></p>
              <input type="file" name="" (change)="onFileChanged($event)" #fileInput class="archivo"
                style="display: none;" accept="image/png, image/gif, image/jpeg" />
            </div>
            <span style="font-weight:bold;color:green;" *ngIf="progress > 0 && progress < 100">
              {{progress}}%
            </span>
            <span style="font-weight:bold;color:green;" *ngIf="message">
              {{message}}
            </span>
          </div>
        </div>
      </div>
      <div fxFlex="100" fxFlex.gt-md="300px" fxFlex.gt-sm="300">
        <mat-card class="profile-sidebar mb-16 pb-0">
          <div class="propic text-center">
            <img [src]="imageURL" alt="" width="300px" height="300px">
          </div>
        </mat-card>
      </div>
        <div fxFlex="50"  class="pt-16 pr-16">
          <mat-slide-toggle [formControl]="itemForm.controls['active']">Activo</mat-slide-toggle>
        </div>
        <mat-divider></mat-divider>
       <div fxFlex="100" class="filter__buttons mt-16">
        <button mat-button color="primary" class="dark-blue-400 dark-blue-400-fg mr-4"
          [disabled]="itemForm.invalid">Guardar</button>
        <span fxFlex></span>
        <button mat-button color="danger" class="dark-blue-100 dark-blue-100-fg ml-4" type="button"
          (click)="dialogRef.close(false)">Cancelar</button>
      </div>
    </div>
    </form>
</mat-card-content>
</mat-dialog-content>